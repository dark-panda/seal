
% We use Palatino as the roman face.
% Monospaced font is still CM
% (fits well and is the most beautiful tt font anyway.)
\RequirePackage[T1]{fontenc}
\RequirePackage{textcomp}
\RequirePackage[osf]{mathpazo}
%\RequirePackage{mathpazo}
%\renewcommand{\rmdefault}{pgyj}

% All the stuff we need ...
\RequirePackage{color}
\RequirePackage{soul}
\RequirePackage{graphicx}
%\RequirePackage{makeidx}

\IfFileExists{url.sty}{\RequirePackage{url}}
                      {\newcommand{\url}{\texttt}}

\ifpdf
  \RequirePackage[colorlinks]{hyperref}
\else
  \newcommand{\pdfbookmark}[2]{}
\fi

%% Memoir Manual, page 64--66
\settrimmedsize{297mm}{210mm}{*}
\setlength{\trimtop}{0pt}
\setlength{\trimedge}{\stockwidth}
\addtolength{\trimedge}{-\paperwidth}
\settypeblocksize{634pt}{448.13pt}{*}
\setulmargins{*}{*}{1}
\setlrmargins{*}{*}{1.618}
\setheadfoot{\onelineskip}{2\onelineskip}
\setheaderspaces{*}{2\onelineskip}{*}
\checkandfixthelayout

%% NOT the memoir-way...
\renewcommand{\maketitle}{
  \thispagestyle{empty}
  \vspace*{2cm}
  \calccentering{\unitlength}
  \begin{adjustwidth*}{\unitlength}{-\unitlength}
    \begin{center}
       \scalebox{2}{\Huge \ls{THE}} \par
       \vspace{8pt}
       \scalebox{2}{\Huge \ls{\textbf{BOB DYLAN}}} \par
       \vspace{8pt}
       \scalebox{2}{\Huge \ls{SONGBOOK}} \par
       \vspace{20pt}
    \end{center}
  \end{adjustwidth*}
  \begin{flushright}
    \vfill
    {\Large \textsc{Eyolf {\O}strem}}
  \end{flushright}
  \setcounter{footnote}{0}
  \newpage
}

%% Memoir Manual, page 185ff
\setlength{\headwidth}{\textwidth}
  \addtolength{\headwidth}{1cm}

\makepagestyle{default}
\makerunningwidth{default}{\headwidth}
\makeheadrule{default}{\headwidth}{\normalrulethickness}
\makeheadposition{default}{flushright}{flushleft}{}{}
\makeevenhead{default}%
  {\boldalbum{\thealbum}}{}{}
\makeevenfoot{default}%
  {\normalfont\thepage}{}{}
\makeoddhead{default}%
  {}{}{\textcolor{songcolor}{\capssong{\thesong}}}
\makeoddfoot{default}%
  {}{}{\normalfont\thepage}

\aliaspagestyle{album}{empty}

\makepagestyle{article}
\makerunningwidth{article}{\headwidth}
\makeheadrule{article}{\headwidth}{0pt}
\makeheadposition{article}{flushright}{flushleft}{}{}
\makeevenhead{article}%
  {}{}{}
\makeevenfoot{article}%
  {\normalfont\thepage}{}{}
\makeoddhead{article}%
  {}{}{}
\makeoddfoot{article}%
  {}{}{\normalfont\thepage}


% ``How about a slightly bigger font size for the song titles?''
%     -- EO, Feb 27, 2006
\setsecheadstyle{\LARGE\bfseries\raggedright}

% letterspacing command
\sodef\ls{}{0.1em}{0.4em plus0.2em}{1em plus.1em minus .1em}

\def\thesong{}
\def\thealbum{}

\newcommand{\capssong}[1]{\textsc{\MakeLowercase{#1}}}
\newcommand{\boldalbum}[1]{\textbf{#1}}

\definecolor{songcolor}{rgb}{.3,.3,.4}

\newlength{\bigparindent}
\setlength{\bigparindent}{\parindent}

\newlength{\bigparskip}
\setlength{\bigparskip}{1ex}

\setlength{\parskip}{\bigparskip}
\setlength{\parindent}{0ex}

\newcommand{\bobrule}{\hrulefill}
%\newcommand{\bobrule}{\rule{\textwidth}{0.2pt}}

\newcommand{\image}[2]{%
  \ifpdf
    \includegraphics[width=1.0\textwidth]{#1}
  \else
    \includegraphics[width=1.0\textwidth]{#2}
  \fi
}

% To get around special characters
\newcommand{\songlbl}[2]{
  \newpage
  \def\thesong{#1}
  \phantomsection
  \label{song:#2}
  \section*{#1}
  \index{\protect\capssong{#1}}
}

% Misc Stuff
\newcommand{\songversion}[1]{\subsubsection*{#1}}

\newcommand{\songversionlbl}[2]{
  \subsubsection*{#1}
  \label{song:#2}
}

\newcommand{\remark}[1]{
  \subsubsection*{#1}
  \label{Remark:\thealbum:#1}
}

\newcommand{\songref}[1]{\capssong{#1}: Page \pageref{song:#1}}
\newcommand{\songlblref}[2]{\capssong{#1}: Page \pageref{song:#2}}

% For the tab Environment
\newcommand{\bs}{\ensuremath{\backslash}}
\newcommand{\amp}{\&}

% For the songs -- otherwise the Index gets confused.
% The command must be \protected anyway...
\newcommand{\excl}{!}

%\newcommand{\outtakearrow}{$\rightarrow$}
\newcommand{\referencearrow}{$\hookrightarrow$}

\newenvironment{pre}
   {\begin{list}{}{
     \raggedright
     \raggedbottom
     \setlength{\leftmargin}{0pt}
     \setlength{\parsep}{3ex}
     \normalfont\ttfamily
     \small}%
    \item[]}
   {\end{list}}

% added for seal 0.1

\newenvironment{refrain}{\begin{quote}}{\end{quote}}
\newenvironment{bridge}{\begin{quote}}{\end{quote}}
\newenvironment{bridge2}{\begin{quote}\begin{quote}}%
  {\end{quote}\end{quote}}
\newenvironment{bridge3}%
  {\begin{quote}\begin{quote}\begin{quote}}%
  {\end{quote}\end{quote}\end{quote}}
\newenvironment{spoken}{}{}
\renewenvironment{verse}{}{}

\newlength{\stdleading}
\setlength{\stdleading}{\baselineskip}

\newlength{\bigleading}
\setlength{\bigleading}{\baselineskip}
\addtolength{\bigleading}{0.2ex}

\newenvironment{articlelayout}%
  {\pagestyle{article}%
   \setlength{\baselineskip}{\bigleading}%
   \setlength{\parindent}{\bigparindent}%
   \setlength{\parskip}{0ex}%
   \begin{adjustwidth*}{30pt}{30pt}}%
  {\setlength{\baselineskip}{\stdleading}%
   \setlength{\parindent}{0ex}%
   \setlength{\parskip}{\bigparskip}%
   \end{adjustwidth*}%
   \pagestyle{default}%
   \thispagestyle{article}
}
